<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prenota il Tuo Test Drive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #000000 0%, #1a1a1a 50%, #0a0a0a 100%);
            min-height: 100vh;
            color: #f5f5f5;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #c9a961 0%, #f4e4c1 50%, #d4af37 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-card {
            background: rgba(20, 20, 20, 0.8);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(201, 169, 97, 0.15);
            border-radius: 24px;
            transition: all 0.4s ease;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.5);
        }
        
        .glass-card:hover {
            border-color: rgba(201, 169, 97, 0.3);
            transform: translateY(-2px);
            box-shadow: 0 20px 50px rgba(201, 169, 97, 0.15);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #c9a961 0%, #d4af37 50%, #b8964e 100%);
            color: #000000;
            font-weight: 600;
            padding: 18px 40px;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            box-shadow: 0 8px 24px rgba(201, 169, 97, 0.3);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 12px 36px rgba(201, 169, 97, 0.5);
            background: linear-gradient(135deg, #d4af37 0%, #e6c56d 50%, #c9a961 100%);
        }
        
        .btn-secondary {
            background: rgba(201, 169, 97, 0.15);
            color: #c9a961;
            border: 1px solid rgba(201, 169, 97, 0.4);
            padding: 14px 32px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .btn-secondary:hover {
            background: rgba(201, 169, 97, 0.25);
            border-color: #c9a961;
        }
        
        .distance-option {
            padding: 24px;
            border: 2px solid rgba(60, 60, 60, 0.5);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(10, 10, 10, 0.6);
        }
        
        .distance-option:hover {
            border-color: rgba(201, 169, 97, 0.6);
            transform: scale(1.03);
            background: rgba(201, 169, 97, 0.05);
        }
        
        .distance-option.selected {
            border-color: #c9a961;
            background: linear-gradient(135deg, rgba(201, 169, 97, 0.15) 0%, rgba(201, 169, 97, 0.05) 100%);
            box-shadow: 0 8px 24px rgba(201, 169, 97, 0.2);
        }
        
        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(212, 175, 55, 0.12);
            border: 1px solid rgba(212, 175, 55, 0.25);
            border-radius: 10px;
            font-size: 14px;
            color: #d4af37;
        }
        
        input, select, textarea {
            background: rgba(10, 10, 10, 0.9);
            border: 1px solid rgba(80, 80, 80, 0.4);
            color: #f5f5f5;
            padding: 22px 28px; /* Aumentato: 22px verticale, 28px orizzontale */
            border-radius: 14px; /* Leggermente più arrotondato */
            width: 100%;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-size: 16px;    /* Aumentato leggermente per leggibilità */
        }

        /* Forza lo spazio del placeholder */
        input::placeholder, textarea::placeholder {
            color: rgba(180, 180, 180, 0.6);
            padding-left: 4px; 
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #c9a961;
            box-shadow: 0 0 0 3px rgba(201, 169, 97, 0.15);
            background: rgba(15, 15, 15, 0.95);
        }
        
        select {
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 24 24' stroke='%23ffffff'%3E%3Cpath stroke-linecap='round' stroke-linejoin='round' stroke-width='2' d='M19 9l-7 7-7-7'%3E%3C/path%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 20px;
            padding-right: 50px;
            appearance: none;
        }
        
        .hero-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 30px 80px rgba(0, 0, 0, 0.7);
        }
        
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid rgba(80, 80, 80, 0.3);
        }
        
        .spec-item:last-child {
            border-bottom: none;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 18px;
            background: rgba(10, 10, 10, 0.6);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(80, 80, 80, 0.3);
        }
        
        .checkbox-container:hover {
            background: rgba(201, 169, 97, 0.08);
            border-color: rgba(201, 169, 97, 0.3);
        }
        
        input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #c9a961;
        }
        
        .price-summary {
           position: relative;
        }
        
        /* Custom Date Picker */
        .date-input-wrapper {
            position: relative;
        }
        
        .date-input-wrapper input[type="text"] {
            padding-right: 50px;
            cursor: pointer;
        }
        
        .date-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: #ffffff;
            width: 20px;
            height: 20px;
        }
        
        .custom-datepicker {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.98);
            border: 1px solid rgba(201, 169, 97, 0.3);
            border-radius: 16px;
            padding: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            min-width: 320px;
        }
        
        .datepicker-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(201, 169, 97, 0.2);
        }
        
        .datepicker-header button {
            background: rgba(201, 169, 97, 0.15);
            border: 1px solid rgba(201, 169, 97, 0.3);
            color: #c9a961;
            padding: 8px 12px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }
        
        .datepicker-header button:hover {
            background: rgba(201, 169, 97, 0.25);
        }
        
        .datepicker-header span {
            font-weight: 600;
            color: #c9a961;
            font-size: 16px;
        }
        
        .datepicker-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .datepicker-weekday {
            text-align: center;
            color: rgba(201, 169, 97, 0.7);
            font-size: 12px;
            font-weight: 600;
            padding: 8px 0;
        }
        
        .datepicker-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
            min-height: 200px; /* Aggiunto per garantire spazio */
        }

        .datepicker-day {
            width: 40px;      /* Larghezza fissa */
            height: 40px;     /* Altezza fissa */
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 14px;
            background: rgba(40, 40, 40, 0.8); /* Colore più visibile */
            border: 1px solid rgba(201, 169, 97, 0.1);
            color: #ffffff;    /* Testo bianco garantito */
        }
        
        .datepicker-day:hover:not(.disabled):not(.selected) {
            background: rgba(201, 169, 97, 0.2);
            border-color: rgba(201, 169, 97, 0.4);
        }
        
        .datepicker-day.selected {
            background: linear-gradient(135deg, #c9a961 0%, #d4af37 100%);
            color: #000;
            font-weight: 600;
            box-shadow: 0 4px 12px rgba(201, 169, 97, 0.4);
        }
        
        .datepicker-day.disabled {
            opacity: 0.3;
            cursor: not-allowed;
            background: rgba(20, 20, 20, 0.3);
        }
        
        .datepicker-day.other-month {
            opacity: 0.4;
        }
        
        .hidden {
            display: none !important;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="mb-12 animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <button onclick="window.history.back()" class="btn-secondary">
                    ← Indietro
                </button>
                <div class="text-right">
                    <div class="text-sm" style="color: rgba(201, 169, 97, 0.8);">Esperienza Esclusiva</div>
                </div>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold gradient-text mb-4">Prenota il Tuo Test Drive</h1>
            <p class="text-xl" style="color: rgba(245, 245, 245, 0.8);">Un'esperienza indimenticabile ti aspetta</p>
        </header>

        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Car Hero Section -->
                <div class="glass-card p-8 animate-fade-in">
                    <img src="https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?w=1200&h=500&fit=crop" alt="Ferrari SF90" class="hero-image mb-6">
                    
                    <div class="flex items-start justify-between mb-6">
                        <div>
                            <h2 class="text-4xl font-bold mb-2">Ferrari SF90 Stradale</h2>
                            <div class="flex items-center gap-2" style="color: rgba(245, 245, 245, 0.7);">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                Milano, Italia
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold gradient-text">€890</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">da / esperienza</div>
                        </div>
                    </div>

                    <!-- Features -->
                    <div class="flex flex-wrap gap-3 mb-6">
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione Inclusa
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna Cauzione
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            Cambio Data Gratuito
                        </span>
                    </div>

                    <p style="color: rgba(245, 245, 245, 0.8);" class="leading-relaxed mb-6">
                        La SF90 Stradale rappresenta l'apice dell'innovazione Ferrari, combinando un motore V8 biturbo da 780 CV con tre motori elettrici per una potenza totale di 1000 CV. Un capolavoro di ingegneria che ridefinisce il concetto di supercar ibrida.
                    </p>

                    <!-- Technical Specs -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Prestazioni</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Potenza</span>
                                    <span class="font-semibold">1000 CV</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">0-100 km/h</span>
                                    <span class="font-semibold">2.5 secondi</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Velocità Massima</span>
                                    <span class="font-semibold">340 km/h</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Trazione</span>
                                    <span class="font-semibold">4WD</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Caratteristiche</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Motore</span>
                                    <span class="font-semibold">V8 Biturbo + 3 Elettrici</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Cilindrata</span>
                                    <span class="font-semibold">3990 cc</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Trasmissione</span>
                                    <span class="font-semibold">8 Rapporti F1</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Posti</span>
                                    <span class="font-semibold">2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distance Selection -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Scegli il Tuo Percorso</h3>
                    <div class="grid md:grid-cols-3 gap-4" id="distanceOptions">
                        <div class="distance-option selected" data-km="10" data-price="890">
                            <div class="text-2xl font-bold gradient-text mb-2">10 km</div>
                            <div class="text-xl font-semibold mb-1">€890</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Esperienza rapida</div>
                        </div>
                        <div class="distance-option" data-km="20" data-price="1290">
                            <div class="text-2xl font-bold gradient-text mb-2">20 km</div>
                            <div class="text-xl font-semibold mb-1">€1.290</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Più popolare</div>
                        </div>
                        <div class="distance-option" data-km="30" data-price="1690">
                            <div class="text-2xl font-bold gradient-text mb-2">30 km</div>
                            <div class="text-xl font-semibold mb-1">€1.690</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Esperienza completa</div>
                        </div>
                        <div class="distance-option" data-km="60" data-price="2990">
                            <div class="text-2xl font-bold gradient-text mb-2">60 km</div>
                            <div class="text-xl font-semibold mb-1">€2.990</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Tour esteso</div>
                        </div>
                        <div class="distance-option" data-km="70" data-price="3490">
                            <div class="text-2xl font-bold gradient-text mb-2">70 km</div>
                            <div class="text-xl font-semibold mb-1">€3.490</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Avventura lunga</div>
                        </div>
                        <div class="distance-option" data-km="120" data-price="5990">
                            <div class="text-2xl font-bold gradient-text mb-2">120 km</div>
                            <div class="text-xl font-semibold mb-1">€5.990</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Esperienza definitiva</div>
                        </div>
                    </div>
                </div>

                <!-- Second Car Option -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-4">Aggiungi Una Seconda Supercar</h3>
                    <p style="color: rgba(245, 245, 245, 0.8);" class="mb-6">Vivi un'esperienza ancora più straordinaria combinando due vetture iconiche</p>
                    
                    <label class="checkbox-container">
                        <input type="checkbox" id="secondCarCheckbox">
                        <div>
                            <div class="font-semibold mb-1">Aggiungi Lamborghini Huracán EVO</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">€1.490 aggiuntivi - Include servizi fotografici e video</div>
                        </div>
                    </label>

                    <div id="extraServices" class="mt-6 space-y-4 hidden">
                        <h4 class="font-semibold text-lg mb-3 gradient-text">Servizi Aggiuntivi Disponibili</h4>
                        
                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="290" data-service="photo">
                            <div>
                                <div class="font-semibold mb-1">Servizio Fotografico Professionale</div>
                                <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">+€290 - Su una vettura a scelta</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="490" data-service="video-hd">
                            <div>
                                <div class="font-semibold mb-1">Video HD Professionale</div>
                                <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">+€490 - Disponibile su entrambe le vetture</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="690" data-service="video-360">
                            <div>
                                <div class="font-semibold mb-1">Video 360° Immersivo</div>
                                <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">+€690 - Su una vettura (marchi diversi)</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Date and Time -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Data e Orario</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Data</label>
                            <div class="date-input-wrapper">
                                <input type="text" id="bookingDate" placeholder="Seleziona data" readonly required>
                                <svg class="date-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                <div id="customDatepicker" class="custom-datepicker hidden"></div>
                            </div>
                            <p class="text-xs mt-2" style="color: rgba(180, 180, 180, 0.6);">Prenotazione da 48-72 ore prima, fino a 6 mesi</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Orario</label>
                            <select id="bookingTime" required>
                                <option value="">Seleziona orario</option>
                                <option value="09:00">09:00</option>
                                <option value="10:00">10:00</option>
                                <option value="11:00">11:00</option>
                                <option value="14:00">14:00</option>
                                <option value="15:00">15:00</option>
                                <option value="16:00">16:00</option>
                                <option value="17:00">17:00</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Personal Information -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">I Tuoi Dati</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Nome</label>
                            <input type="text" placeholder="Il tuo nome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Cognome</label>
                            <input type="text" placeholder="Il tuo cognome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Email</label>
                            <input type="email" placeholder="tua@email.com" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Telefono</label>
                            <input type="tel" placeholder="+39 123 456 7890" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.9);">Note Aggiuntive (opzionale)</label>
                            <textarea rows="4" placeholder="Hai richieste particolari?"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Terms -->
                <div class="glass-card p-6 animate-fade-in">
                    <label class="checkbox-container">
                        <input type="checkbox" id="termsCheckbox" required>
                        <div class="text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            Accetto i <a href="#" class="text-[#c9a961] hover:underline">termini e condizioni</a> e la 
                            <a href="#" class="text-[#c9a961] hover:underline">politica sulla privacy</a>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Sidebar - Price Summary -->
            <div class="lg:col-span-1">
                <div class="glass-card p-8 price-summary animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6 gradient-text">Riepilogo</h3>
                    
                    <div class="space-y-4 mb-6 pb-6" style="border-bottom: 1px solid rgba(80, 80, 80, 0.4);">
                        <div class="flex justify-between">
                            <span style="color: rgba(245, 245, 245, 0.8);">Ferrari SF90 Stradale</span>
                            <span class="font-semibold" id="basePrice">€890</span>
                        </div>
                        <div class="flex justify-between hidden" id="secondCarPrice">
                            <span style="color: rgba(245, 245, 245, 0.8);">Lamborghini Huracán</span>
                            <span class="font-semibold">€1.490</span>
                        </div>
                        <div id="extraServicesPrice" class="space-y-2"></div>
                    </div>

                    <div class="space-y-3 mb-6">
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #c9a961;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione completa
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #c9a961;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna cauzione richiesta
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #c9a961;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Cambio data gratuito
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #c9a961;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Rimborso fino a 48h prima
                        </div>
                    </div>

                    <div class="p-4 rounded-lg mb-6" style="background: linear-gradient(135deg, rgba(201, 169, 97, 0.15) 0%, rgba(201, 169, 97, 0.05) 100%);">
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-semibold">Totale</span>
                            <span class="text-3xl font-bold gradient-text" id="totalPrice">€890</span>
                        </div>
                    </div>

                    <button class="btn-primary w-full" onclick="confirmBooking()">
                        Conferma Prenotazione
                    </button>

                    <p class="text-xs text-center mt-4" style="color: rgba(180, 180, 180, 0.6);">
                        Prenotazione sicura e protetta
                    </p>
                </div>

                <!-- Policies -->
                <div class="glass-card p-6 mt-6 animate-fade-in">
                    <h4 class="font-semibold mb-4 gradient-text">Politiche</h4>
                    <div class="space-y-3 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                        <div>
                            <strong>Rimborso:</strong> Rimborso completo fino a 48 ore prima della prenotazione.
                        </div>
                        <div>
                            <strong>Annullamento:</strong> Annullamento gratuito fino a 24 ore prima. Oltre tale termine, verrà trattenuto il 50% dell'importo.
                        </div>
                        <div>
                            <strong>Cambio Data:</strong> Modifica gratuita della data fino a 72 ore prima dell'esperienza.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bookingData = {
            distance: 10,
            basePrice: 890,
            secondCar: false,
            extraServices: [],
            total: 890
        };

        // Custom Date Picker
        class CustomDatePicker {
            constructor(inputElement, pickerElement) {
                this.input = inputElement;
                this.picker = pickerElement;
                this.currentDate = new Date();
                this.selectedDate = null;
                this.minDate = new Date();
                this.minDate.setDate(this.minDate.getDate() + 3);
                this.maxDate = new Date();
                this.maxDate.setMonth(this.maxDate.getMonth() + 6);
                
                this.init();
            }
            
            init() {
                this.input.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.show();
                });
                
                document.addEventListener('click', (e) => {
                    if (!this.picker.contains(e.target) && e.target !== this.input) {
                        this.hide();
                    }
                });
                
                this.render();
            }
            
            show() {
                this.picker.classList.remove('hidden');
                this.render();
            }
            
            hide() {
                this.picker.classList.add('hidden');
            }
            
            render() {
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                
                const monthNames = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                                  'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];
                
                let html = `
                    <div class="datepicker-header">
                        <button type="button" onclick="datePicker.prevMonth()">◀</button>
                        <span>${monthNames[month]} ${year}</span>
                        <button type="button" onclick="datePicker.nextMonth()">▶</button>
                    </div>
                    <div class="datepicker-weekdays">
                        <div class="datepicker-weekday">Lun</div>
                        <div class="datepicker-weekday">Mar</div>
                        <div class="datepicker-weekday">Mer</div>
                        <div class="datepicker-weekday">Gio</div>
                        <div class="datepicker-weekday">Ven</div>
                        <div class="datepicker-weekday">Sab</div>
                        <div class="datepicker-weekday">Dom</div>
                    </div>
                    <div class="datepicker-days">
                `;
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const prevLastDay = new Date(year, month, 0);
                
                const firstDayWeekday = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
                const lastDayDate = lastDay.getDate();
                const prevLastDayDate = prevLastDay.getDate();
                
                // Previous month days
                for (let i = firstDayWeekday; i > 0; i--) {
                    html += `<div class="datepicker-day other-month disabled">${prevLastDayDate - i + 1}</div>`;
                }
                
                // Current month days
                for (let day = 1; day <= lastDayDate; day++) {
                    const date = new Date(year, month, day);
                    const isDisabled = date < this.minDate || date > this.maxDate;
                    const isSelected = this.selectedDate && 
                                      date.getDate() === this.selectedDate.getDate() &&
                                      date.getMonth() === this.selectedDate.getMonth() &&
                                      date.getFullYear() === this.selectedDate.getFullYear();
                    
                    const classes = ['datepicker-day'];
                    if (isDisabled) classes.push('disabled');
                    if (isSelected) classes.push('selected');
                    
                    html += `<div class="${classes.join(' ')}" onclick="datePicker.selectDate(${year}, ${month}, ${day})" data-disabled="${isDisabled}">${day}</div>`;
                }
                
                // Next month days
                const remainingDays = 7 - ((firstDayWeekday + lastDayDate) % 7);
                if (remainingDays < 7) {
                    for (let i = 1; i <= remainingDays; i++) {
                        html += `<div class="datepicker-day other-month disabled">${i}</div>`;
                    }
                }
                
                html += `</div>`;
                this.picker.innerHTML = html;
            }
            
            selectDate(year, month, day) {
                const date = new Date(year, month, day);
                if (date < this.minDate || date > this.maxDate) return;
                
                this.selectedDate = date;
                const formatted = `${String(day).padStart(2, '0')}/${String(month + 1).padStart(2, '0')}/${year}`;
                this.input.value = formatted;
                this.hide();
            }
            
            prevMonth() {
                this.currentDate.setMonth(this.currentDate.getMonth() - 1);
                this.render();
            }
            
            nextMonth() {
                this.currentDate.setMonth(this.currentDate.getMonth() + 1);
                this.render();
            }
        }
        
        const datePicker = new CustomDatePicker(
            document.getElementById('bookingDate'),
            document.getElementById('customDatepicker')
        );

        // Distance selection
        document.querySelectorAll('.distance-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.distance-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                bookingData.distance = this.dataset.km;
                bookingData.basePrice = parseInt(this.dataset.price);
                updatePriceSummary();
            });
        });

        // Second car checkbox
        document.getElementById('secondCarCheckbox').addEventListener('change', function() {
            bookingData.secondCar = this.checked;
            document.getElementById('extraServices').classList.toggle('hidden', !this.checked);
            document.getElementById('secondCarPrice').classList.toggle('hidden', !this.checked);
            
            if (!this.checked) {
                document.querySelectorAll('.extra-service').forEach(cb => cb.checked = false);
                bookingData.extraServices = [];
            }
            
            updatePriceSummary();
        });

        // Extra services
        document.querySelectorAll('.extra-service').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const price = parseInt(this.dataset.price);
                const service = this.dataset.service;
                
                if (this.checked) {
                    bookingData.extraServices.push({ service, price });
                } else {
                    bookingData.extraServices = bookingData.extraServices.filter(s => s.service !== service);
                }
                
                updatePriceSummary();
            });
        });

        function updatePriceSummary() {
            let total = bookingData.basePrice;
            
            document.getElementById('basePrice').textContent = `€${bookingData.basePrice.toLocaleString()}`;
            
            if (bookingData.secondCar) {
                total += 1490;
            }
            
            const extraServicesDiv = document.getElementById('extraServicesPrice');
            extraServicesDiv.innerHTML = '';
            
            bookingData.extraServices.forEach(service => {
                total += service.price;
                const serviceNames = {
                    'photo': 'Servizio Fotografico',
                    'video-hd': 'Video HD',
                    'video-360': 'Video 360°'
                };
                
                const div = document.createElement('div');
                div.className = 'flex justify-between';
                div.innerHTML = `
                    <span class="text-sm" style="color: rgba(245, 245, 245, 0.8);">${serviceNames[service.service]}</span>
                    <span class="font-semibold text-sm">€${service.price}</span>
                `;
                extraServicesDiv.appendChild(div);
            });
            
            bookingData.total = total;
            document.getElementById('totalPrice').textContent = `€${total.toLocaleString()}`;
        }

        function confirmBooking() {
            if (!bookingData.distance) {
                alert('Seleziona un percorso prima di procedere');
                return;
            }
            
            const date = document.getElementById('bookingDate').value;
            const time = document.getElementById('bookingTime').value;
            const terms = document.getElementById('termsCheckbox').checked;
            
            if (!date || !time) {
                alert('Seleziona data e orario');
                return;
            }
            
            if (!terms) {
                alert('Accetta i termini e condizioni per procedere');
                return;
            }
            
            alert(`Prenotazione confermata!\n\nRiepilogo:\n- Percorso: ${bookingData.distance} km\n- Data: ${date} alle ${time}\n- Totale: €${bookingData.total.toLocaleString()}\n\nRiceverai una conferma via email.`);
        }

        // Forza la visibilità immediata di tutte le card
        document.querySelectorAll('.animate-fade-in').forEach(el => {
          el.style.opacity = '1';
          el.style.transform = 'translateY(0)';
        });
    </script>
</body>
</html>
