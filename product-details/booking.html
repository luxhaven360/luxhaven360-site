<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prenota il Tuo Test Drive</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Hide Tailwind CDN warning */
        #tailwind-cdn-warning {
            display: none !important;
        }
        
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0e1a 0%, #1a1f2e 50%, #0a0e1a 100%);
            min-height: 100vh;
            color: #f5f5f5;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #ffd700 0%, #ffed4e 50%, #ffd700 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-card {
            background: rgba(20, 25, 40, 0.7);
            backdrop-filter: blur(25px);
            border: 1px solid rgba(255, 215, 0, 0.15);
            border-radius: 24px;
            transition: all 0.4s ease;
        }
        
        .glass-card:hover {
            border-color: rgba(255, 215, 0, 0.35);
            transform: translateY(-2px);
            box-shadow: 0 25px 50px rgba(255, 215, 0, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #ffd700 0%, #ffb700 100%);
            color: #0a0e1a;
            font-weight: 700;
            padding: 18px 40px;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            letter-spacing: 0.5px;
            text-transform: uppercase;
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 15px 40px rgba(255, 215, 0, 0.5);
            background: linear-gradient(135deg, #ffed4e 0%, #ffd700 100%);
        }
        
        .btn-secondary {
            background: rgba(255, 215, 0, 0.1);
            color: #ffd700;
            border: 2px solid #ffd700;
            padding: 12px 30px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }
        
        .btn-secondary:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: translateX(-5px);
        }
        
        .distance-option {
            padding: 24px;
            border: 2px solid rgba(80, 90, 110, 0.4);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(10, 14, 26, 0.6);
        }
        
        .distance-option:hover {
            border-color: rgba(255, 215, 0, 0.6);
            transform: scale(1.03);
            box-shadow: 0 8px 25px rgba(255, 215, 0, 0.2);
        }
        
        .distance-option.selected {
            border-color: #ffd700;
            background: rgba(255, 215, 0, 0.15);
            box-shadow: 0 8px 30px rgba(255, 215, 0, 0.3);
        }
        
        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(16, 185, 129, 0.15);
            border: 1px solid rgba(16, 185, 129, 0.4);
            border-radius: 10px;
            font-size: 14px;
            color: #6ee7b7;
            font-weight: 500;
        }
        
        input, select, textarea {
            background: rgba(10, 14, 26, 0.9);
            border: 2px solid rgba(80, 90, 110, 0.4);
            color: #f5f5f5;
            padding: 16px 18px;
            border-radius: 12px;
            width: 100%;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(148, 163, 184, 0.6);
            font-size: 14px;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #ffd700;
            box-shadow: 0 0 0 4px rgba(255, 215, 0, 0.15);
            background: rgba(10, 14, 26, 1);
        }
        
        /* Custom date input styling */
        input[type="date"] {
            position: relative;
            padding-right: 45px;
            cursor: pointer;
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator {
            position: absolute;
            right: 15px;
            cursor: pointer;
            filter: invert(1);
            opacity: 0.8;
            width: 20px;
            height: 20px;
        }
        
        input[type="date"]::-webkit-calendar-picker-indicator:hover {
            opacity: 1;
        }
        
        /* Custom select styling */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23f5f5f5' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
            background-size: 20px;
            padding-right: 45px;
            cursor: pointer;
        }
        
        .hero-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
        }
        
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid rgba(80, 90, 110, 0.3);
        }
        
        .spec-item:last-child {
            border-bottom: none;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 18px;
            background: rgba(10, 14, 26, 0.6);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(80, 90, 110, 0.2);
        }
        
        .checkbox-container:hover {
            background: rgba(255, 215, 0, 0.08);
            border-color: rgba(255, 215, 0, 0.3);
        }
        
        input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #ffd700;
        }
        
        .price-summary {
            position: sticky;
            top: 20px;
        }
        
        /* Custom Calendar Styles */
        .custom-calendar {
            position: absolute;
            top: 100%;
            left: 0;
            right: 0;
            margin-top: 8px;
            background: rgba(15, 20, 35, 0.98);
            border: 2px solid rgba(255, 215, 0, 0.3);
            border-radius: 16px;
            padding: 20px;
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(255, 215, 0, 0.2);
        }
        
        .calendar-nav {
            background: rgba(255, 215, 0, 0.1);
            border: 1px solid rgba(255, 215, 0, 0.3);
            color: #ffd700;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease;
            font-size: 18px;
            font-weight: bold;
        }
        
        .calendar-nav:hover {
            background: rgba(255, 215, 0, 0.2);
            transform: scale(1.1);
        }
        
        .calendar-month-year {
            font-size: 18px;
            font-weight: 700;
            color: #ffd700;
            font-family: 'Playfair Display', serif;
        }
        
        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 10px;
        }
        
        .calendar-weekday {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: rgba(255, 215, 0, 0.7);
            padding: 8px;
        }
        
        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-weight: 500;
            border: 1px solid transparent;
        }
        
        .calendar-day:not(.disabled):not(.other-month):hover {
            background: rgba(255, 215, 0, 0.15);
            border-color: rgba(255, 215, 0, 0.4);
            transform: scale(1.05);
        }
        
        .calendar-day.selected {
            background: linear-gradient(135deg, #ffd700 0%, #ffb700 100%);
            color: #0a0e1a;
            font-weight: 700;
            border-color: #ffd700;
        }
        
        .calendar-day.disabled {
            color: rgba(148, 163, 184, 0.3);
            cursor: not-allowed;
        }
        
        .calendar-day.other-month {
            color: rgba(148, 163, 184, 0.4);
        }
        
        .calendar-day.today {
            border-color: #ffd700;
            font-weight: 600;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="mb-12 animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <button onclick="window.history.back()" class="btn-secondary">
                    ← Indietro
                </button>
                <div class="text-right">
                    <div class="text-sm" style="color: rgba(255, 215, 0, 0.8);">Esperienza Esclusiva</div>
                </div>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold gradient-text mb-4">Prenota il Tuo Test Drive</h1>
            <p class="text-xl" style="color: rgba(245, 245, 245, 0.8);">Un'esperienza indimenticabile ti aspetta</p>
        </header>

        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Car Hero Section -->
                <div class="glass-card p-8 animate-fade-in">
                    <img src="https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?w=1200&h=500&fit=crop" alt="Ferrari SF90" class="hero-image mb-6">
                    
                    <div class="flex items-start justify-between mb-6">
                        <div>
                            <h2 class="text-4xl font-bold mb-2">Ferrari SF90 Stradale</h2>
                            <div class="flex items-center gap-2" style="color: rgba(245, 245, 245, 0.7);">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                Milano, Italia
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold gradient-text">€890</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">da / esperienza</div>
                        </div>
                    </div>

                    <!-- Features -->
                    <div class="flex flex-wrap gap-3 mb-6">
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione Inclusa
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna Cauzione
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            Cambio Data Gratuito
                        </span>
                    </div>

                    <p style="color: rgba(245, 245, 245, 0.8);" class="leading-relaxed mb-6">
                        La SF90 Stradale rappresenta l'apice dell'innovazione Ferrari, combinando un motore V8 biturbo da 780 CV con tre motori elettrici per una potenza totale di 1000 CV. Un capolavoro di ingegneria che ridefinisce il concetto di supercar ibrida.
                    </p>

                    <!-- Technical Specs -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Prestazioni</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Potenza</span>
                                    <span class="font-semibold">1000 CV</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">0-100 km/h</span>
                                    <span class="font-semibold">2.5 secondi</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Velocità Massima</span>
                                    <span class="font-semibold">340 km/h</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Trazione</span>
                                    <span class="font-semibold">4WD</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Caratteristiche</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Motore</span>
                                    <span class="font-semibold">V8 Biturbo + 3 Elettrici</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Cilindrata</span>
                                    <span class="font-semibold">3990 cc</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Trasmissione</span>
                                    <span class="font-semibold">8 Rapporti F1</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(245, 245, 245, 0.6);">Posti</span>
                                    <span class="font-semibold">2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distance Selection -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Scegli il Tuo Percorso</h3>
                    <div class="grid md:grid-cols-3 gap-4" id="distanceOptions">
                        <div class="distance-option selected" data-km="10" data-price="890">
                            <div class="text-2xl font-bold gradient-text mb-2">10 km</div>
                            <div class="text-xl font-semibold mb-1">€890</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">Esperienza rapida</div>
                        </div>
                        <div class="distance-option" data-km="20" data-price="1290">
                            <div class="text-2xl font-bold gradient-text mb-2">20 km</div>
                            <div class="text-xl font-semibold mb-1">€1.290</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">Più popolare</div>
                        </div>
                        <div class="distance-option" data-km="30" data-price="1690">
                            <div class="text-2xl font-bold gradient-text mb-2">30 km</div>
                            <div class="text-xl font-semibold mb-1">€1.690</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">Esperienza completa</div>
                        </div>
                        <div class="distance-option" data-km="60" data-price="2990">
                            <div class="text-2xl font-bold gradient-text mb-2">60 km</div>
                            <div class="text-xl font-semibold mb-1">€2.990</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">Tour esteso</div>
                        </div>
                        <div class="distance-option" data-km="70" data-price="3490">
                            <div class="text-2xl font-bold gradient-text mb-2">70 km</div>
                            <div class="text-xl font-semibold mb-1">€3.490</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">Avventura lunga</div>
                        </div>
                        <div class="distance-option" data-km="120" data-price="5990">
                            <div class="text-2xl font-bold gradient-text mb-2">120 km</div>
                            <div class="text-xl font-semibold mb-1">€5.990</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">Esperienza definitiva</div>
                        </div>
                    </div>
                </div>

                <!-- Second Car Option -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-4">Aggiungi Una Seconda Supercar</h3>
                    <p style="color: rgba(245, 245, 245, 0.7);" class="mb-6">Vivi un'esperienza ancora più straordinaria combinando due vetture iconiche</p>
                    
                    <label class="checkbox-container">
                        <input type="checkbox" id="secondCarCheckbox">
                        <div>
                            <div class="font-semibold mb-1">Aggiungi Lamborghini Huracán EVO</div>
                            <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">€1.490 aggiuntivi - Include servizi fotografici e video</div>
                        </div>
                    </label>

                    <div id="extraServices" class="mt-6 space-y-4 hidden">
                        <h4 class="font-semibold text-lg mb-3 gradient-text">Servizi Aggiuntivi Disponibili</h4>
                        
                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="290" data-service="photo">
                            <div>
                                <div class="font-semibold mb-1">Servizio Fotografico Professionale</div>
                                <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">+€290 - Su una vettura a scelta</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="490" data-service="video-hd">
                            <div>
                                <div class="font-semibold mb-1">Video HD Professionale</div>
                                <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">+€490 - Disponibile su entrambe le vetture</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="690" data-service="video-360">
                            <div>
                                <div class="font-semibold mb-1">Video 360° Immersivo</div>
                                <div class="text-sm" style="color: rgba(245, 245, 245, 0.6);">+€690 - Su una vettura (marchi diversi)</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Date and Time -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Data e Orario</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div style="position: relative;">
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Data</label>
                            <input type="text" id="bookingDate" placeholder="Seleziona data" readonly required style="cursor: pointer;">
                            <p class="text-xs mt-2" style="color: rgba(245, 245, 245, 0.5);">Prenotazione da 48-72 ore prima, fino a 6 mesi</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Orario</label>
                            <select id="bookingTime" required>
                                <option value="">Seleziona orario</option>
                                <option value="09:00">09:00</option>
                                <option value="10:00">10:00</option>
                                <option value="11:00">11:00</option>
                                <option value="14:00">14:00</option>
                                <option value="15:00">15:00</option>
                                <option value="16:00">16:00</option>
                                <option value="17:00">17:00</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Personal Information -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">I Tuoi Dati</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Nome</label>
                            <input type="text" placeholder="Il tuo nome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Cognome</label>
                            <input type="text" placeholder="Il tuo cognome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Email</label>
                            <input type="email" placeholder="tua@email.com" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Telefono</label>
                            <input type="tel" placeholder="+39 123 456 7890" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 245, 0.8);">Note Aggiuntive (opzionale)</label>
                            <textarea rows="3" placeholder="Hai richieste particolari?"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Terms -->
                <div class="glass-card p-6 animate-fade-in">
                    <label class="checkbox-container">
                        <input type="checkbox" id="termsCheckbox" required>
                        <div class="text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            Accetto i <a href="#" style="color: #ffd700;" class="hover:underline">termini e condizioni</a> e la 
                            <a href="#" style="color: #ffd700;" class="hover:underline">politica sulla privacy</a>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Sidebar - Price Summary -->
            <div class="lg:col-span-1">
                <div class="glass-card p-8 price-summary animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6 gradient-text">Riepilogo</h3>
                    
                    <div class="space-y-4 mb-6 pb-6" style="border-bottom: 1px solid rgba(80, 90, 110, 0.4);">
                        <div class="flex justify-between">
                            <span style="color: rgba(245, 245, 245, 0.8);">Ferrari SF90 Stradale</span>
                            <span class="font-semibold" id="basePrice">€890</span>
                        </div>
                        <div class="flex justify-between hidden" id="secondCarPrice">
                            <span style="color: rgba(245, 245, 245, 0.8);">Lamborghini Huracán</span>
                            <span class="font-semibold">€1.490</span>
                        </div>
                        <div id="extraServicesPrice" class="space-y-2"></div>
                    </div>

                    <div class="space-y-3 mb-6">
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #6ee7b7;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione completa
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #6ee7b7;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna cauzione richiesta
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #6ee7b7;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Cambio data gratuito
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                            <svg class="w-5 h-5" style="color: #6ee7b7;" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Rimborso fino a 48h prima
                        </div>
                    </div>

                    <div class="p-5 rounded-xl mb-6" style="background: linear-gradient(135deg, rgba(255, 215, 0, 0.15) 0%, rgba(255, 215, 0, 0.05) 100%);">
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-semibold">Totale</span>
                            <span class="text-3xl font-bold gradient-text" id="totalPrice">€890</span>
                        </div>
                    </div>

                    <button class="btn-primary w-full" onclick="confirmBooking()">
                        Conferma Prenotazione
                    </button>

                    <p class="text-xs text-center mt-4" style="color: rgba(245, 245, 245, 0.5);">
                        Prenotazione sicura e protetta
                    </p>
                </div>

                <!-- Policies -->
                <div class="glass-card p-6 mt-6 animate-fade-in">
                    <h4 class="font-semibold mb-4 gradient-text">Politiche</h4>
                    <div class="space-y-3 text-sm" style="color: rgba(245, 245, 245, 0.8);">
                        <div>
                            <strong style="color: #ffd700;">Rimborso:</strong> Rimborso completo fino a 48 ore prima della prenotazione.
                        </div>
                        <div>
                            <strong style="color: #ffd700;">Annullamento:</strong> Annullamento gratuito fino a 24 ore prima. Oltre tale termine, verrà trattenuto il 50% dell'importo.
                        </div>
                        <div>
                            <strong style="color: #ffd700;">Cambio Data:</strong> Modifica gratuita della data fino a 72 ore prima dell'esperienza.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bookingData = {
            distance: 10,
            basePrice: 890,
            secondCar: false,
            extraServices: [],
            total: 890,
            selectedDate: null
        };

        // Custom Calendar
        class CustomCalendar {
            constructor(inputElement) {
                this.input = inputElement;
                this.currentDate = new Date();
                this.selectedDate = null;
                this.minDate = new Date();
                this.minDate.setDate(this.minDate.getDate() + 3); // 72 hours (3 days)
                this.maxDate = new Date();
                this.maxDate.setMonth(this.maxDate.getMonth() + 6);
                
                this.createCalendar();
                this.attachEvents();
            }
            
            createCalendar() {
                this.calendar = document.createElement('div');
                this.calendar.className = 'custom-calendar';
                this.calendar.style.display = 'none';
                this.input.parentElement.appendChild(this.calendar);
                this.renderCalendar();
            }
            
            attachEvents() {
                this.input.addEventListener('click', (e) => {
                    e.stopPropagation();
                    this.show();
                });
                
                document.addEventListener('click', (e) => {
                    if (!this.calendar.contains(e.target) && e.target !== this.input) {
                        this.hide();
                    }
                });
            }
            
            show() {
                this.calendar.style.display = 'block';
            }
            
            hide() {
                this.calendar.style.display = 'none';
            }
            
            renderCalendar() {
                const year = this.currentDate.getFullYear();
                const month = this.currentDate.getMonth();
                
                const monthNames = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                                  'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];
                
                const firstDay = new Date(year, month, 1);
                const lastDay = new Date(year, month + 1, 0);
                const prevLastDay = new Date(year, month, 0);
                
                const firstDayOfWeek = firstDay.getDay() === 0 ? 6 : firstDay.getDay() - 1;
                const lastDate = lastDay.getDate();
                const prevLastDate = prevLastDay.getDate();
                
                let html = `
                    <div class="calendar-header">
                        <button class="calendar-nav" onclick="calendar.prevMonth()">‹</button>
                        <div class="calendar-month-year">${monthNames[month]} ${year}</div>
                        <button class="calendar-nav" onclick="calendar.nextMonth()">›</button>
                    </div>
                    <div class="calendar-weekdays">
                        <div class="calendar-weekday">Lun</div>
                        <div class="calendar-weekday">Mar</div>
                        <div class="calendar-weekday">Mer</div>
                        <div class="calendar-weekday">Gio</div>
                        <div class="calendar-weekday">Ven</div>
                        <div class="calendar-weekday">Sab</div>
                        <div class="calendar-weekday">Dom</div>
                    </div>
                    <div class="calendar-days">
                `;
                
                // Previous month days
                for (let i = firstDayOfWeek; i > 0; i--) {
                    html += `<div class="calendar-day other-month">${prevLastDate - i + 1}</div>`;
                }
                
                // Current month days
                const today = new Date();
                today.setHours(0, 0, 0, 0);
                
                for (let day = 1; day <= lastDate; day++) {
                    const currentDay = new Date(year, month, day);
                    currentDay.setHours(0, 0, 0, 0);
                    
                    let classes = 'calendar-day';
                    let disabled = false;
                    
                    if (currentDay < this.minDate || currentDay > this.maxDate) {
                        classes += ' disabled';
                        disabled = true;
                    }
                    
                    if (currentDay.getTime() === today.getTime()) {
                        classes += ' today';
                    }
                    
                    if (this.selectedDate && currentDay.getTime() === this.selectedDate.getTime()) {
                        classes += ' selected';
                    }
                    
                    html += `<div class="${classes}" onclick="calendar.selectDate(${year}, ${month}, ${day}, ${disabled})">${day}</div>`;
                }
                
                // Next month days
                const remainingDays = 7 - ((firstDayOfWeek + lastDate) % 7);
                if (remainingDays < 7) {
                    for (let i = 1; i <= remainingDays; i++) {
                        html += `<div class="calendar-day other-month">${i}</div>`;
                    }
                }
                
                html += '</div>';
                this.calendar.innerHTML = html;
            }
            
            selectDate(year, month, day, disabled) {
                if (disabled) return;
                
                this.selectedDate = new Date(year, month, day);
                bookingData.selectedDate = this.selectedDate;
                
                const formattedDate = `${day.toString().padStart(2, '0')}/${(month + 1).toString().padStart(2, '0')}/${year}`;
                this.input.value = formattedDate;
                
                this.renderCalendar();
                this.hide();
            }
            
            prevMonth() {
                this.currentDate.setMonth(this.currentDate.getMonth() - 1);
                this.renderCalendar();
            }
            
            nextMonth() {
                this.currentDate.setMonth(this.currentDate.getMonth() + 1);
                this.renderCalendar();
            }
        }
        
        // Initialize calendar
        const dateInput = document.getElementById('bookingDate');
        const calendar = new CustomCalendar(dateInput);

        // Distance selection
        document.querySelectorAll('.distance-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.distance-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                bookingData.distance = this.dataset.km;
                bookingData.basePrice = parseInt(this.dataset.price);
                updatePriceSummary();
            });
        });

        // Second car checkbox
        document.getElementById('secondCarCheckbox').addEventListener('change', function() {
            bookingData.secondCar = this.checked;
            document.getElementById('extraServices').classList.toggle('hidden', !this.checked);
            document.getElementById('secondCarPrice').classList.toggle('hidden', !this.checked);
            
            if (!this.checked) {
                document.querySelectorAll('.extra-service').forEach(cb => cb.checked = false);
                bookingData.extraServices = [];
            }
            
            updatePriceSummary();
        });

        // Extra services
        document.querySelectorAll('.extra-service').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const price = parseInt(this.dataset.price);
                const service = this.dataset.service;
                
                if (this.checked) {
                    bookingData.extraServices.push({ service, price });
                } else {
                    bookingData.extraServices = bookingData.extraServices.filter(s => s.service !== service);
                }
                
                updatePriceSummary();
            });
        });

        function updatePriceSummary() {
            let total = bookingData.basePrice;
            
            document.getElementById('basePrice').textContent = `€${bookingData.basePrice.toLocaleString()}`;
            
            if (bookingData.secondCar) {
                total += 1490;
            }
            
            const extraServicesDiv = document.getElementById('extraServicesPrice');
            extraServicesDiv.innerHTML = '';
            
            bookingData.extraServices.forEach(service => {
                total += service.price;
                const serviceNames = {
                    'photo': 'Servizio Fotografico',
                    'video-hd': 'Video HD',
                    'video-360': 'Video 360°'
                };
                
                const div = document.createElement('div');
                div.className = 'flex justify-between';
                div.innerHTML = `
                    <span style="color: rgba(245, 245, 245, 0.8);" class="text-sm">${serviceNames[service.service]}</span>
                    <span class="font-semibold text-sm">€${service.price}</span>
                `;
                extraServicesDiv.appendChild(div);
            });
            
            bookingData.total = total;
            document.getElementById('totalPrice').textContent = `€${total.toLocaleString()}`;
        }

        function confirmBooking() {
            if (!bookingData.distance) {
                alert('Seleziona un percorso prima di procedere');
                return;
            }
            
            const date = document.getElementById('bookingDate').value;
            const time = document.getElementById('bookingTime').value;
            const terms = document.getElementById('termsCheckbox').checked;
            
            if (!date || !time) {
                alert('Seleziona data e orario');
                return;
            }
            
            if (!terms) {
                alert('Accetta i termini e condizioni per procedere');
                return;
            }
            
            alert(`Prenotazione confermata!\n\nRiepilogo:\n- Percorso: ${bookingData.distance} km\n- Data: ${date} alle ${time}\n- Totale: €${bookingData.total.toLocaleString()}\n\nRiceverai una conferma via email.`);
        }

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-fade-in').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.6s ease';
            observer.observe(el);
        });
        
        // Initialize price summary with default values
        updatePriceSummary();
    </script>
</body>
</html>
