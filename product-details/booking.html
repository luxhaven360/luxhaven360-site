<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prenota il Tuo Test Drive</title>
    <script>
        // Suppress Tailwind CDN warning
        window.process = {env: {NODE_ENV: 'production'}};
    </script>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1410 50%, #0a0a0a 100%);
            min-height: 100vh;
            color: #f5f5f0;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #e6c466 0%, #fef9e7 50%, #d4a853 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-card {
            background: rgba(26, 20, 16, 0.7);
            backdrop-filter: blur(30px);
            border: 1px solid rgba(230, 196, 102, 0.15);
            border-radius: 24px;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .glass-card:hover {
            border-color: rgba(230, 196, 102, 0.4);
            transform: translateY(-3px);
            box-shadow: 0 30px 60px rgba(230, 196, 102, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #e6c466 0%, #d4a853 100%);
            color: #0a0a0a;
            font-weight: 600;
            padding: 18px 44px;
            border: none;
            border-radius: 14px;
            cursor: pointer;
            transition: all 0.4s ease;
            font-size: 17px;
            letter-spacing: 0.8px;
            box-shadow: 0 8px 24px rgba(230, 196, 102, 0.25);
        }
        
        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 16px 40px rgba(230, 196, 102, 0.4);
            background: linear-gradient(135deg, #fef9e7 0%, #e6c466 100%);
        }
        
        .btn-secondary {
            background: rgba(230, 196, 102, 0.08);
            color: #e6c466;
            border: 1.5px solid #e6c466;
            padding: 14px 32px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .btn-secondary:hover {
            background: rgba(230, 196, 102, 0.18);
            transform: translateX(-2px);
        }
        
        .distance-option {
            padding: 24px;
            border: 2px solid rgba(80, 80, 80, 0.3);
            border-radius: 16px;
            cursor: pointer;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            background: rgba(10, 10, 10, 0.6);
        }
        
        .distance-option:hover {
            border-color: rgba(230, 196, 102, 0.6);
            transform: scale(1.03);
            box-shadow: 0 12px 32px rgba(230, 196, 102, 0.15);
        }
        
        .distance-option.selected {
            border-color: #e6c466;
            background: rgba(230, 196, 102, 0.12);
            box-shadow: 0 0 0 4px rgba(230, 196, 102, 0.1);
        }
        
        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 10px 18px;
            background: rgba(52, 211, 153, 0.08);
            border: 1px solid rgba(52, 211, 153, 0.3);
            border-radius: 10px;
            font-size: 14px;
            color: #86efac;
        }
        
        input, select, textarea {
            background: rgba(10, 10, 10, 0.85);
            border: 1.5px solid rgba(80, 80, 80, 0.4);
            color: #f5f5f0;
            padding: 16px 18px;
            border-radius: 12px;
            width: 100%;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(180, 180, 180, 0.5);
            font-size: 14px;
            padding-left: 2px;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #e6c466;
            box-shadow: 0 0 0 4px rgba(230, 196, 102, 0.12);
            background: rgba(10, 10, 10, 0.95);
        }
        
        .hero-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.7);
        }
        
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 14px 0;
            border-bottom: 1px solid rgba(80, 80, 80, 0.25);
        }
        
        .spec-item:last-child {
            border-bottom: none;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 14px;
            padding: 18px;
            background: rgba(10, 10, 10, 0.6);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(80, 80, 80, 0.2);
        }
        
        .checkbox-container:hover {
            background: rgba(230, 196, 102, 0.06);
            border-color: rgba(230, 196, 102, 0.3);
        }
        
        input[type="checkbox"] {
            width: 22px;
            height: 22px;
            cursor: pointer;
            accent-color: #e6c466;
        }

        /* Custom Date Picker Styles */
        .date-input-wrapper {
            position: relative;
            width: 100%;
        }

        .date-display {
            background: rgba(10, 10, 10, 0.85);
            border: 1.5px solid rgba(80, 80, 80, 0.4);
            color: #f5f5f0;
            padding: 16px 48px 16px 18px;
            border-radius: 12px;
            width: 100%;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
            font-size: 15px;
        }

        .date-display.placeholder {
            color: rgba(180, 180, 180, 0.5);
            font-size: 14px;
        }

        .date-display:hover,
        .date-display.active {
            border-color: #e6c466;
            box-shadow: 0 0 0 4px rgba(230, 196, 102, 0.12);
        }

        .calendar-icon {
            position: absolute;
            right: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #ffffff;
            pointer-events: none;
            opacity: 0.7;
        }

        .custom-calendar {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            z-index: 1000;
            background: rgba(10, 10, 10, 0.98);
            border: 2px solid rgba(230, 196, 102, 0.3);
            border-radius: 16px;
            padding: 24px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
            min-width: 320px;
            display: none;
        }

        .custom-calendar.active {
            display: block;
            animation: fadeInUp 0.3s ease;
        }

        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid rgba(230, 196, 102, 0.2);
        }

        .calendar-header button {
            background: rgba(230, 196, 102, 0.1);
            border: 1px solid rgba(230, 196, 102, 0.3);
            color: #e6c466;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .calendar-header button:hover {
            background: rgba(230, 196, 102, 0.2);
        }

        .calendar-month {
            font-size: 18px;
            font-weight: 600;
            color: #e6c466;
            font-family: 'Playfair Display', serif;
        }

        .calendar-weekdays {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-bottom: 8px;
        }

        .calendar-weekday {
            text-align: center;
            font-size: 12px;
            font-weight: 600;
            color: rgba(230, 196, 102, 0.6);
            padding: 8px 0;
        }

        .calendar-days {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 6px;
        }

        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 14px;
            background: rgba(230, 196, 102, 0.03);
            border: 1px solid transparent;
        }

        .calendar-day:hover:not(.disabled):not(.other-month) {
            background: rgba(230, 196, 102, 0.15);
            border-color: rgba(230, 196, 102, 0.4);
            transform: scale(1.05);
        }

        .calendar-day.selected {
            background: linear-gradient(135deg, #e6c466 0%, #d4a853 100%);
            color: #0a0a0a;
            font-weight: 600;
        }

        .calendar-day.today {
            border-color: #e6c466;
        }

        .calendar-day.disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .calendar-day.other-month {
            opacity: 0.2;
            cursor: default;
        }

        /* Custom Select Arrow */
        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 24 24' fill='none' stroke='%23ffffff' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 16px center;
            background-size: 18px;
            padding-right: 48px;
        }
    </style>
</head>
<body>
    <div class="container mx-auto px-4 py-8 max-w-7xl">
        <!-- Header -->
        <header class="mb-12 animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <button onclick="window.history.back()" class="btn-secondary">
                    ← Indietro
                </button>
                <div class="text-right">
                    <div class="text-sm" style="color: rgba(230, 196, 102, 0.7);">Esperienza Esclusiva</div>
                </div>
            </div>
            <h1 class="text-5xl md:text-6xl font-bold gradient-text mb-4">Prenota il Tuo Test Drive</h1>
            <p class="text-xl" style="color: rgba(245, 245, 240, 0.8);">Un'esperienza indimenticabile ti aspetta</p>
        </header>

        <div class="grid lg:grid-cols-3 gap-8">
            <!-- Main Content -->
            <div class="lg:col-span-2 space-y-8">
                <!-- Car Hero Section -->
                <div class="glass-card p-8 animate-fade-in">
                    <img src="https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?w=1200&h=500&fit=crop" alt="Ferrari SF90" class="hero-image mb-6">
                    
                    <div class="flex items-start justify-between mb-6">
                        <div>
                            <h2 class="text-4xl font-bold mb-2">Ferrari SF90 Stradale</h2>
                            <div class="flex items-center gap-2" style="color: rgba(245, 245, 240, 0.7);">
                                <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                Milano, Italia
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold gradient-text">€890</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.6);">da / esperienza</div>
                        </div>
                    </div>

                    <!-- Features -->
                    <div class="flex flex-wrap gap-3 mb-6">
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione Inclusa
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna Cauzione
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            Cambio Data Gratuito
                        </span>
                    </div>

                    <p style="color: rgba(245, 245, 240, 0.8);" class="leading-relaxed mb-6">
                        La SF90 Stradale rappresenta l'apice dell'innovazione Ferrari, combinando un motore V8 biturbo da 780 CV con tre motori elettrici per una potenza totale di 1000 CV. Un capolavoro di ingegneria che ridefinisce il concetto di supercar ibrida.
                    </p>

                    <!-- Technical Specs -->
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Prestazioni</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Potenza</span>
                                    <span class="font-semibold">1000 CV</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">0-100 km/h</span>
                                    <span class="font-semibold">2.5 secondi</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Velocità Massima</span>
                                    <span class="font-semibold">340 km/h</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Trazione</span>
                                    <span class="font-semibold">4WD</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Caratteristiche</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Motore</span>
                                    <span class="font-semibold">V8 Biturbo + 3 Elettrici</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Cilindrata</span>
                                    <span class="font-semibold">3990 cc</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Trasmissione</span>
                                    <span class="font-semibold">8 Rapporti F1</span>
                                </div>
                                <div class="spec-item">
                                    <span style="color: rgba(180, 180, 180, 0.8);">Posti</span>
                                    <span class="font-semibold">2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distance Selection -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Scegli il Tuo Percorso</h3>
                    <div class="grid md:grid-cols-3 gap-4" id="distanceOptions">
                        <div class="distance-option selected" data-km="10" data-price="890">
                            <div class="text-2xl font-bold gradient-text mb-2">10 km</div>
                            <div class="text-xl font-semibold mb-1">€890</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Esperienza rapida</div>
                        </div>
                        <div class="distance-option" data-km="20" data-price="1290">
                            <div class="text-2xl font-bold gradient-text mb-2">20 km</div>
                            <div class="text-xl font-semibold mb-1">€1.290</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Più popolare</div>
                        </div>
                        <div class="distance-option" data-km="30" data-price="1690">
                            <div class="text-2xl font-bold gradient-text mb-2">30 km</div>
                            <div class="text-xl font-semibold mb-1">€1.690</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Esperienza completa</div>
                        </div>
                        <div class="distance-option" data-km="60" data-price="2990">
                            <div class="text-2xl font-bold gradient-text mb-2">60 km</div>
                            <div class="text-xl font-semibold mb-1">€2.990</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Tour esteso</div>
                        </div>
                        <div class="distance-option" data-km="70" data-price="3490">
                            <div class="text-2xl font-bold gradient-text mb-2">70 km</div>
                            <div class="text-xl font-semibold mb-1">€3.490</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Avventura lunga</div>
                        </div>
                        <div class="distance-option" data-km="120" data-price="5990">
                            <div class="text-2xl font-bold gradient-text mb-2">120 km</div>
                            <div class="text-xl font-semibold mb-1">€5.990</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">Esperienza definitiva</div>
                        </div>
                    </div>
                </div>

                <!-- Second Car Option -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-4">Aggiungi Una Seconda Supercar</h3>
                    <p style="color: rgba(245, 245, 240, 0.7);" class="mb-6">Vivi un'esperienza ancora più straordinaria combinando due vetture iconiche</p>
                    
                    <label class="checkbox-container">
                        <input type="checkbox" id="secondCarCheckbox">
                        <div>
                            <div class="font-semibold mb-1">Aggiungi Lamborghini Huracán EVO</div>
                            <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">€1.490 aggiuntivi - Include servizi fotografici e video</div>
                        </div>
                    </label>

                    <div id="extraServices" class="mt-6 space-y-4 hidden">
                        <h4 class="font-semibold text-lg mb-3 gradient-text">Servizi Aggiuntivi Disponibili</h4>
                        
                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="290" data-service="photo">
                            <div>
                                <div class="font-semibold mb-1">Servizio Fotografico Professionale</div>
                                <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">+€290 - Su una vettura a scelta</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="490" data-service="video-hd">
                            <div>
                                <div class="font-semibold mb-1">Video HD Professionale</div>
                                <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">+€490 - Disponibile su entrambe le vetture</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="690" data-service="video-360">
                            <div>
                                <div class="font-semibold mb-1">Video 360° Immersivo</div>
                                <div class="text-sm" style="color: rgba(180, 180, 180, 0.7);">+€690 - Su una vettura (marchi diversi)</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Date and Time -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Data e Orario</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Data</label>
                            <div class="date-input-wrapper">
                                <div class="date-display placeholder" id="dateDisplay">Seleziona data</div>
                                <svg class="calendar-icon w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                                <div class="custom-calendar" id="customCalendar">
                                    <div class="calendar-header">
                                        <button type="button" id="prevMonth">‹</button>
                                        <span class="calendar-month" id="calendarMonth"></span>
                                        <button type="button" id="nextMonth">›</button>
                                    </div>
                                    <div class="calendar-weekdays">
                                        <div class="calendar-weekday">Lun</div>
                                        <div class="calendar-weekday">Mar</div>
                                        <div class="calendar-weekday">Mer</div>
                                        <div class="calendar-weekday">Gio</div>
                                        <div class="calendar-weekday">Ven</div>
                                        <div class="calendar-weekday">Sab</div>
                                        <div class="calendar-weekday">Dom</div>
                                    </div>
                                    <div class="calendar-days" id="calendarDays"></div>
                                </div>
                            </div>
                            <p class="text-xs mt-2" style="color: rgba(180, 180, 180, 0.6);">Prenotazione da 48-72 ore prima, fino a 6 mesi</p>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Orario</label>
                            <select id="bookingTime" required>
                                <option value="">Seleziona orario</option>
                                <option value="09:00">09:00</option>
                                <option value="10:00">10:00</option>
                                <option value="11:00">11:00</option>
                                <option value="14:00">14:00</option>
                                <option value="15:00">15:00</option>
                                <option value="16:00">16:00</option>
                                <option value="17:00">17:00</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Personal Information -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">I Tuoi Dati</h3>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Nome</label>
                            <input type="text" placeholder="Il tuo nome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Cognome</label>
                            <input type="text" placeholder="Il tuo cognome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Email</label>
                            <input type="email" placeholder="tua@email.com" required>
                        </div>
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Telefono</label>
                            <input type="tel" placeholder="+39 123 456 7890" required>
                        </div>
                        <div class="md:col-span-2">
                            <label class="block text-sm font-medium mb-2" style="color: rgba(245, 245, 240, 0.8);">Note Aggiuntive (opzionale)</label>
                            <textarea rows="3" placeholder="Hai richieste particolari?"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Terms -->
                <div class="glass-card p-6 animate-fade-in">
                    <label class="checkbox-container">
                        <input type="checkbox" id="termsCheckbox" required>
                        <div class="text-sm" style="color: rgba(245, 245, 240, 0.8);">
                            Accetto i <a href="#" class="text-[#e6c466] hover:underline">termini e condizioni</a> e la 
                            <a href="#" class="text-[#e6c466] hover:underline">politica sulla privacy</a>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Sidebar - Price Summary -->
            <div class="lg:col-span-1">
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6 gradient-text">Riepilogo</h3>
                    
                    <div class="space-y-4 mb-6 pb-6" style="border-bottom: 1px solid rgba(80, 80, 80, 0.3);">
                        <div class="flex justify-between">
                            <span style="color: rgba(245, 245, 240, 0.8);">Ferrari SF90 Stradale</span>
                            <span class="font-semibold" id="basePrice">€890</span>
                        </div>
                        <div class="flex justify-between hidden" id="secondCarPrice">
                            <span style="color: rgba(245, 245, 240, 0.8);">Lamborghini Huracán</span>
                            <span class="font-semibold">€1.490</span>
                        </div>
                        <div id="extraServicesPrice" class="space-y-2"></div>
                    </div>

                    <div class="space-y-3 mb-6">
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 240, 0.8);">
                            <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione completa
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 240, 0.8);">
                            <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna cauzione richiesta
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 240, 0.8);">
                            <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Cambio data gratuito
                        </div>
                        <div class="flex items-center gap-2 text-sm" style="color: rgba(245, 245, 240, 0.8);">
                            <svg class="w-5 h-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Rimborso fino a 48h prima
                        </div>
                    </div>

                    <div class="p-4 rounded-lg mb-6" style="background: linear-gradient(to right, rgba(230, 196, 102, 0.12), transparent);">
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-semibold">Totale</span>
                            <span class="text-3xl font-bold gradient-text" id="totalPrice">€890</span>
                        </div>
                    </div>

                    <button class="btn-primary w-full" onclick="confirmBooking()">
                        Conferma Prenotazione
                    </button>

                    <p class="text-xs text-center mt-4" style="color: rgba(180, 180, 180, 0.6);">
                        Prenotazione sicura e protetta
                    </p>
                </div>

                <!-- Policies -->
                <div class="glass-card p-6 mt-6 animate-fade-in">
                    <h4 class="font-semibold mb-4 gradient-text">Politiche</h4>
                    <div class="space-y-3 text-sm" style="color: rgba(245, 245, 240, 0.8);">
                        <div>
                            <strong>Rimborso:</strong> Rimborso completo fino a 48 ore prima della prenotazione.
                        </div>
                        <div>
                            <strong>Annullamento:</strong> Annullamento gratuito fino a 24 ore prima. Oltre tale termine, verrà trattenuto il 50% dell'importo.
                        </div>
                        <div>
                            <strong>Cambio Data:</strong> Modifica gratuita della data fino a 72 ore prima dell'esperienza.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bookingData = {
            distance: 10,
            basePrice: 890,
            secondCar: false,
            extraServices: [],
            total: 890,
            selectedDate: null
        };

        // Custom Calendar
        let currentMonth = new Date();
        let selectedDate = null;

        const monthNames = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                           'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];

        const dateDisplay = document.getElementById('dateDisplay');
        const customCalendar = document.getElementById('customCalendar');
        const calendarMonth = document.getElementById('calendarMonth');
        const calendarDays = document.getElementById('calendarDays');

        // Calculate min and max dates
        const today = new Date();
        const minDate = new Date(today);
        minDate.setDate(minDate.getDate() + 3); // 72 hours from now
        const maxDate = new Date(today);
        maxDate.setMonth(maxDate.getMonth() + 6);

        function formatDate(date) {
            const day = String(date.getDate()).padStart(2, '0');
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        function isDateDisabled(date) {
            return date < minDate || date > maxDate;
        }

        function isSameDay(date1, date2) {
            return date1.getDate() === date2.getDate() &&
                   date1.getMonth() === date2.getMonth() &&
                   date1.getFullYear() === date2.getFullYear();
        }

        function renderCalendar() {
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            calendarMonth.textContent = `${monthNames[month]} ${year}`;
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const prevLastDay = new Date(year, month, 0);
            
            const firstDayIndex = (firstDay.getDay() + 6) % 7; // Monday = 0
            const lastDayDate = lastDay.getDate();
            const prevLastDayDate = prevLastDay.getDate();
            
            calendarDays.innerHTML = '';
            
            // Previous month days
            for (let i = firstDayIndex; i > 0; i--) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                dayDiv.textContent = prevLastDayDate - i + 1;
                calendarDays.appendChild(dayDiv);
            }
            
            // Current month days
            for (let day = 1; day <= lastDayDate; day++) {
                const date = new Date(year, month, day);
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day';
                dayDiv.textContent = day;
                
                if (isSameDay(date, today)) {
                    dayDiv.classList.add('today');
                }
                
                if (selectedDate && isSameDay(date, selectedDate)) {
                    dayDiv.classList.add('selected');
                }
                
                if (isDateDisabled(date)) {
                    dayDiv.classList.add('disabled');
                } else {
                    dayDiv.addEventListener('click', () => selectDate(date));
                }
                
                calendarDays.appendChild(dayDiv);
            }
            
            // Next month days
            const totalCells = calendarDays.children.length;
            const remainingCells = 42 - totalCells; // 6 weeks
            for (let i = 1; i <= remainingCells; i++) {
                const dayDiv = document.createElement('div');
                dayDiv.className = 'calendar-day other-month';
                dayDiv.textContent = i;
                calendarDays.appendChild(dayDiv);
            }
        }

        function selectDate(date) {
            selectedDate = date;
            bookingData.selectedDate = date;
            dateDisplay.textContent = formatDate(date);
            dateDisplay.classList.remove('placeholder');
            customCalendar.classList.remove('active');
            dateDisplay.classList.remove('active');
        }

        dateDisplay.addEventListener('click', (e) => {
            e.stopPropagation();
            customCalendar.classList.toggle('active');
            dateDisplay.classList.toggle('active');
            if (customCalendar.classList.contains('active')) {
                renderCalendar();
            }
        });

        document.getElementById('prevMonth').addEventListener('click', (e) => {
            e.stopPropagation();
            currentMonth.setMonth(currentMonth.getMonth() - 1);
            renderCalendar();
        });

        document.getElementById('nextMonth').addEventListener('click', (e) => {
            e.stopPropagation();
            currentMonth.setMonth(currentMonth.getMonth() + 1);
            renderCalendar();
        });

        // Close calendar when clicking outside
        document.addEventListener('click', (e) => {
            if (!customCalendar.contains(e.target) && e.target !== dateDisplay) {
                customCalendar.classList.remove('active');
                dateDisplay.classList.remove('active');
            }
        });

        // Distance selection
        document.querySelectorAll('.distance-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.distance-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                bookingData.distance = parseInt(this.dataset.km);
                bookingData.basePrice = parseInt(this.dataset.price);
                updatePriceSummary();
            });
        });

        // Second car checkbox
        document.getElementById('secondCarCheckbox').addEventListener('change', function() {
            bookingData.secondCar = this.checked;
            document.getElementById('extraServices').classList.toggle('hidden', !this.checked);
            document.getElementById('secondCarPrice').classList.toggle('hidden', !this.checked);
            
            if (!this.checked) {
                document.querySelectorAll('.extra-service').forEach(cb => cb.checked = false);
                bookingData.extraServices = [];
            }
            
            updatePriceSummary();
        });

        // Extra services
        document.querySelectorAll('.extra-service').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const price = parseInt(this.dataset.price);
                const service = this.dataset.service;
                
                if (this.checked) {
                    bookingData.extraServices.push({ service, price });
                } else {
                    bookingData.extraServices = bookingData.extraServices.filter(s => s.service !== service);
                }
                
                updatePriceSummary();
            });
        });

        function updatePriceSummary() {
            let total = bookingData.basePrice;
            
            document.getElementById('basePrice').textContent = `€${bookingData.basePrice.toLocaleString()}`;
            
            if (bookingData.secondCar) {
                total += 1490;
            }
            
            const extraServicesDiv = document.getElementById('extraServicesPrice');
            extraServicesDiv.innerHTML = '';
            
            bookingData.extraServices.forEach(service => {
                total += service.price;
                const serviceNames = {
                    'photo': 'Servizio Fotografico',
                    'video-hd': 'Video HD',
                    'video-360': 'Video 360°'
                };
                
                const div = document.createElement('div');
                div.className = 'flex justify-between';
                div.innerHTML = `
                    <span style="color: rgba(245, 245, 240, 0.8);" class="text-sm">${serviceNames[service.service]}</span>
                    <span class="font-semibold text-sm">€${service.price}</span>
                `;
                extraServicesDiv.appendChild(div);
            });
            
            bookingData.total = total;
            document.getElementById('totalPrice').textContent = `€${total.toLocaleString()}`;
        }

        function confirmBooking() {
            if (!bookingData.distance) {
                alert('Seleziona un percorso prima di procedere');
                return;
            }
            
            if (!bookingData.selectedDate) {
                alert('Seleziona una data');
                return;
            }
            
            const time = document.getElementById('bookingTime').value;
            const terms = document.getElementById('termsCheckbox').checked;
            
            if (!time) {
                alert('Seleziona un orario');
                return;
            }
            
            if (!terms) {
                alert('Accetta i termini e condizioni per procedere');
                return;
            }
            
            alert(`Prenotazione confermata!\n\nRiepilogo:\n- Percorso: ${bookingData.distance} km\n- Data: ${formatDate(bookingData.selectedDate)} alle ${time}\n- Totale: €${bookingData.total.toLocaleString()}\n\nRiceverai una conferma via email.`);
        }

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-fade-in').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.6s ease';
            observer.observe(el);
        });

        // Initialize with default selection
        updatePriceSummary();
    </script>
</body>
</html>
