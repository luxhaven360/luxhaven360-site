
<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Prenota il Tuo Test Drive</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Inter:wght@300;400;500;600&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0a0a0a 0%, #1a1410 50%, #0a0a0a 100%);
            min-height: 100vh;
            color: #f5f5f5;
        }
        
        h1, h2, h3 {
            font-family: 'Playfair Display', serif;
        }
        
        .gradient-text {
            background: linear-gradient(135deg, #c9a961 0%, #f4e4c1 50%, #c9a961 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }
        
        .glass-card {
            background: rgba(26, 20, 16, 0.7);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(201, 169, 97, 0.15);
            border-radius: 20px;
            transition: all 0.4s ease;
        }
        
        .glass-card:hover {
            border-color: rgba(201, 169, 97, 0.35);
            transform: translateY(-2px);
            box-shadow: 0 20px 40px rgba(201, 169, 97, 0.1);
        }
        
        .btn-primary {
            background: linear-gradient(135deg, #c9a961 0%, #a68b4d 100%);
            color: #0a0a0a;
            font-weight: 600;
            padding: 16px 40px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 16px;
            letter-spacing: 0.5px;
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 10px 30px rgba(201, 169, 97, 0.4);
        }
        
        .btn-secondary {
            background: rgba(201, 169, 97, 0.1);
            color: #c9a961;
            border: 1px solid #c9a961;
            padding: 12px 30px;
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
        }
        
        .btn-secondary:hover {
            background: rgba(201, 169, 97, 0.2);
        }
        
        .distance-option {
            padding: 20px;
            border: 2px solid rgba(80, 70, 60, 0.3);
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            background: rgba(10, 10, 10, 0.5);
        }
        
        .distance-option:hover {
            border-color: rgba(201, 169, 97, 0.5);
            transform: scale(1.02);
        }
        
        .distance-option.selected {
            border-color: #c9a961;
            background: rgba(201, 169, 97, 0.15);
        }
        
        .feature-badge {
            display: inline-flex;
            align-items: center;
            gap: 8px;
            padding: 8px 16px;
            background: rgba(201, 169, 97, 0.1);
            border: 1px solid rgba(201, 169, 97, 0.3);
            border-radius: 8px;
            font-size: 14px;
            color: #d4c5a0;
        }
        
        input, select, textarea {
            background: rgba(10, 10, 10, 0.8);
            border: 1px solid rgba(80, 70, 60, 0.3);
            color: #f5f5f5;
            padding: 14px 14px 14px 20px;
            border-radius: 10px;
            width: 100%;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }
        
        input::placeholder, textarea::placeholder {
            color: rgba(180, 180, 180, 0.6);
            font-size: 13px;
        }
        
        select {
            padding-right: 40px;
            cursor: pointer;
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='20' height='20' viewBox='0 0 20 20' fill='none'%3E%3Cpath d='M5 7.5L10 12.5L15 7.5' stroke='white' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'/%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right 15px center;
        }
        
        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: #c9a961;
            box-shadow: 0 0 0 3px rgba(201, 169, 97, 0.15);
        }
        
        .hero-image {
            width: 100%;
            height: 500px;
            object-fit: cover;
            border-radius: 20px;
            box-shadow: 0 30px 60px rgba(0, 0, 0, 0.6);
        }
        
        .spec-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 0;
            border-bottom: 1px solid rgba(80, 70, 60, 0.2);
        }
        
        .spec-item:last-child {
            border-bottom: none;
        }
        
        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fadeInUp 0.6s ease forwards;
        }
        
        .checkbox-container {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 16px;
            background: rgba(10, 10, 10, 0.5);
            border-radius: 10px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .checkbox-container:hover {
            background: rgba(201, 169, 97, 0.08);
        }
        
        input[type="checkbox"] {
            width: 20px;
            height: 20px;
            cursor: pointer;
        }
        
        .price-summary {
            position: sticky;
            top: 20px;
        }
        
        .container {
            max-width: 1280px;
            margin: 0 auto;
            padding: 2rem 1rem;
        }
        
        .grid {
            display: grid;
            gap: 2rem;
        }
        
        @media (min-width: 1024px) {
            .lg-grid-cols-3 {
                grid-template-columns: repeat(3, 1fr);
            }
            .lg-col-span-2 {
                grid-column: span 2;
            }
            .lg-col-span-1 {
                grid-column: span 1;
            }
        }
        
        .md-grid-cols-2 {
            display: grid;
            gap: 1.5rem;
        }
        
        @media (min-width: 768px) {
            .md-grid-cols-2 {
                grid-template-columns: repeat(2, 1fr);
            }
            .md-grid-cols-3 {
                grid-template-columns: repeat(3, 1fr);
            }
            .md-col-span-2 {
                grid-column: span 2;
            }
        }
        
        .space-y-8 > * + * {
            margin-top: 2rem;
        }
        
        .space-y-6 > * + * {
            margin-top: 1.5rem;
        }
        
        .space-y-4 > * + * {
            margin-top: 1rem;
        }
        
        .space-y-3 > * + * {
            margin-top: 0.75rem;
        }
        
        .space-y-2 > * + * {
            margin-top: 0.5rem;
        }
        
        .hidden {
            display: none;
        }
        
        .flex {
            display: flex;
        }
        
        .items-center {
            align-items: center;
        }
        
        .items-start {
            align-items: flex-start;
        }
        
        .justify-between {
            justify-content: space-between;
        }
        
        .gap-2 {
            gap: 0.5rem;
        }
        
        .gap-3 {
            gap: 0.75rem;
        }
        
        .gap-4 {
            gap: 1rem;
        }
        
        .gap-6 {
            gap: 1.5rem;
        }
        
        .gap-8 {
            gap: 2rem;
        }
        
        .mb-1 { margin-bottom: 0.25rem; }
        .mb-2 { margin-bottom: 0.5rem; }
        .mb-3 { margin-bottom: 0.75rem; }
        .mb-4 { margin-bottom: 1rem; }
        .mb-6 { margin-bottom: 1.5rem; }
        .mb-12 { margin-bottom: 3rem; }
        .mt-2 { margin-top: 0.5rem; }
        .mt-4 { margin-top: 1rem; }
        .mt-6 { margin-top: 1.5rem; }
        
        .p-4 { padding: 1rem; }
        .p-6 { padding: 1.5rem; }
        .p-8 { padding: 2rem; }
        .pb-6 { padding-bottom: 1.5rem; }
        
        .text-xs { font-size: 0.75rem; }
        .text-sm { font-size: 0.875rem; }
        .text-lg { font-size: 1.125rem; }
        .text-xl { font-size: 1.25rem; }
        .text-2xl { font-size: 1.5rem; }
        .text-3xl { font-size: 1.875rem; }
        .text-4xl { font-size: 2.25rem; }
        .text-5xl { font-size: 3rem; }
        
        @media (min-width: 768px) {
            .text-5xl { font-size: 3rem; }
            .text-6xl { font-size: 3.75rem; }
        }
        
        .font-semibold { font-weight: 600; }
        .font-bold { font-weight: 700; }
        
        .text-right { text-align: right; }
        .text-center { text-align: center; }
        
        .w-5 { width: 1.25rem; }
        .w-full { width: 100%; }
        
        .flex-wrap {
            flex-wrap: wrap;
        }
        
        .block {
            display: block;
        }
        
        .inline-flex {
            display: inline-flex;
        }
        
        .rounded-lg {
            border-radius: 0.5rem;
        }
        
        .border-b {
            border-bottom-width: 1px;
        }
        
        .border-slate-700 {
            border-color: rgb(51 65 85);
        }
        
        .text-slate-300 {
            color: rgb(203 213 225);
        }
        
        .text-slate-400 {
            color: rgb(148 163 184);
        }
        
        .text-green-400 {
            color: rgb(74 222 128);
        }
        
        .leading-relaxed {
            line-height: 1.625;
        }
        
        /* Date Picker Styles */
        .date-picker-container {
            position: relative;
        }
        
        .date-input-wrapper {
            position: relative;
        }
        
        .date-input-wrapper input {
            padding-right: 45px;
        }
        
        .calendar-icon {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            pointer-events: none;
            color: white;
        }
        
        .custom-calendar {
            position: absolute;
            top: calc(100% + 8px);
            left: 0;
            right: 0;
            background: rgba(10, 10, 10, 0.98);
            border: 1px solid rgba(201, 169, 97, 0.3);
            border-radius: 12px;
            padding: 20px;
            z-index: 1000;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(20px);
        }
        
        .calendar-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .calendar-nav-btn {
            background: rgba(201, 169, 97, 0.1);
            border: 1px solid rgba(201, 169, 97, 0.3);
            color: #c9a961;
            width: 36px;
            height: 36px;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .calendar-nav-btn:hover {
            background: rgba(201, 169, 97, 0.2);
        }
        
        .calendar-month-year {
            font-weight: 600;
            color: #c9a961;
            font-size: 16px;
        }
        
        .calendar-grid {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
        }
        
        .calendar-day-header {
            text-align: center;
            font-size: 12px;
            color: rgba(201, 169, 97, 0.8);
            font-weight: 600;
            padding: 8px 0;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s ease;
            font-size: 14px;
            border: 1px solid transparent;
        }
        
        .calendar-day:hover:not(.disabled):not(.empty) {
            background: rgba(201, 169, 97, 0.15);
            border-color: rgba(201, 169, 97, 0.3);
        }
        
        .calendar-day.selected {
            background: linear-gradient(135deg, #c9a961 0%, #a68b4d 100%);
            color: #0a0a0a;
            font-weight: 600;
        }
        
        .calendar-day.today {
            border-color: #c9a961;
        }
        
        .calendar-day.disabled {
            color: rgba(148, 163, 184, 0.3);
            cursor: not-allowed;
        }
        
        .calendar-day.empty {
            cursor: default;
        }
        
        /* Policies card fix - no sticky positioning */
        .policies-card {
            position: relative;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="mb-12 animate-fade-in">
            <div class="flex items-center justify-between mb-6">
                <button onclick="window.history.back()" class="btn-secondary">
                    ← Indietro
                </button>
                <div class="text-right">
                    <div class="text-sm text-slate-400">Esperienza Esclusiva</div>
                </div>
            </div>
            <h1 class="text-5xl font-bold gradient-text mb-4">Prenota il Tuo Test Drive</h1>
            <p class="text-xl text-slate-300">Un'esperienza indimenticabile ti aspetta</p>
        </header>

        <div class="grid lg-grid-cols-3">
            <!-- Main Content -->
            <div class="lg-col-span-2 space-y-8">
                <!-- Car Hero Section -->
                <div class="glass-card p-8 animate-fade-in">
                    <img src="https://images.unsplash.com/photo-1605559424843-9e4c228bf1c2?w=1200&h=500&fit=crop" alt="Ferrari SF90" class="hero-image mb-6">
                    
                    <div class="flex items-start justify-between mb-6">
                        <div>
                            <h2 class="text-4xl font-bold mb-2">Ferrari SF90 Stradale</h2>
                            <div class="flex items-center gap-2 text-slate-300">
                                <svg class="w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"/>
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z"/>
                                </svg>
                                Milano, Italia
                            </div>
                        </div>
                        <div class="text-right">
                            <div class="text-3xl font-bold gradient-text">€890</div>
                            <div class="text-sm text-slate-400">da / esperienza</div>
                        </div>
                    </div>

                    <!-- Features -->
                    <div class="flex flex-wrap gap-3 mb-6">
                        <span class="feature-badge">
                            <svg class="w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione Inclusa
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna Cauzione
                        </span>
                        <span class="feature-badge">
                            <svg class="w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                            </svg>
                            Cambio Data Gratuito
                        </span>
                    </div>

                    <p class="text-slate-300 leading-relaxed mb-6">
                        La SF90 Stradale rappresenta l'apice dell'innovazione Ferrari, combinando un motore V8 biturbo da 780 CV con tre motori elettrici per una potenza totale di 1000 CV. Un capolavoro di ingegneria che ridefinisce il concetto di supercar ibrida.
                    </p>

                    <!-- Technical Specs -->
                    <div class="md-grid-cols-2">
                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Prestazioni</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span class="text-slate-400">Potenza</span>
                                    <span class="font-semibold">1000 CV</span>
                                </div>
                                <div class="spec-item">
                                    <span class="text-slate-400">0-100 km/h</span>
                                    <span class="font-semibold">2.5 secondi</span>
                                </div>
                                <div class="spec-item">
                                    <span class="text-slate-400">Velocità Massima</span>
                                    <span class="font-semibold">340 km/h</span>
                                </div>
                                <div class="spec-item">
                                    <span class="text-slate-400">Trazione</span>
                                    <span class="font-semibold">4WD</span>
                                </div>
                            </div>
                        </div>

                        <div class="glass-card p-6">
                            <h3 class="text-xl font-bold mb-4 gradient-text">Caratteristiche</h3>
                            <div class="space-y-2">
                                <div class="spec-item">
                                    <span class="text-slate-400">Motore</span>
                                    <span class="font-semibold">V8 Biturbo + 3 Elettrici</span>
                                </div>
                                <div class="spec-item">
                                    <span class="text-slate-400">Cilindrata</span>
                                    <span class="font-semibold">3990 cc</span>
                                </div>
                                <div class="spec-item">
                                    <span class="text-slate-400">Trasmissione</span>
                                    <span class="font-semibold">8 Rapporti F1</span>
                                </div>
                                <div class="spec-item">
                                    <span class="text-slate-400">Posti</span>
                                    <span class="font-semibold">2</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Distance Selection -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Scegli il Tuo Percorso</h3>
                    <div class="grid md-grid-cols-3 gap-4" id="distanceOptions">
                        <div class="distance-option" data-km="10" data-price="890">
                            <div class="text-2xl font-bold gradient-text mb-2">10 km</div>
                            <div class="text-xl font-semibold mb-1">€890</div>
                            <div class="text-sm text-slate-400">Esperienza rapida</div>
                        </div>
                        <div class="distance-option" data-km="20" data-price="1290">
                            <div class="text-2xl font-bold gradient-text mb-2">20 km</div>
                            <div class="text-xl font-semibold mb-1">€1.290</div>
                            <div class="text-sm text-slate-400">Più popolare</div>
                        </div>
                        <div class="distance-option" data-km="30" data-price="1690">
                            <div class="text-2xl font-bold gradient-text mb-2">30 km</div>
                            <div class="text-xl font-semibold mb-1">€1.690</div>
                            <div class="text-sm text-slate-400">Esperienza completa</div>
                        </div>
                        <div class="distance-option" data-km="60" data-price="2990">
                            <div class="text-2xl font-bold gradient-text mb-2">60 km</div>
                            <div class="text-xl font-semibold mb-1">€2.990</div>
                            <div class="text-sm text-slate-400">Tour esteso</div>
                        </div>
                        <div class="distance-option" data-km="70" data-price="3490">
                            <div class="text-2xl font-bold gradient-text mb-2">70 km</div>
                            <div class="text-xl font-semibold mb-1">€3.490</div>
                            <div class="text-sm text-slate-400">Avventura lunga</div>
                        </div>
                        <div class="distance-option" data-km="120" data-price="5990">
                            <div class="text-2xl font-bold gradient-text mb-2">120 km</div>
                            <div class="text-xl font-semibold mb-1">€5.990</div>
                            <div class="text-sm text-slate-400">Esperienza definitiva</div>
                        </div>
                    </div>
                </div>

                <!-- Second Car Option -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-4">Aggiungi Una Seconda Supercar</h3>
                    <p class="text-slate-300 mb-6">Vivi un'esperienza ancora più straordinaria combinando due vetture iconiche</p>
                    
                    <label class="checkbox-container">
                        <input type="checkbox" id="secondCarCheckbox">
                        <div>
                            <div class="font-semibold mb-1">Aggiungi Lamborghini Huracán EVO</div>
                            <div class="text-sm text-slate-400">€1.490 aggiuntivi - Include servizi fotografici e video</div>
                        </div>
                    </label>

                    <div id="extraServices" class="mt-6 space-y-4 hidden">
                        <h4 class="font-semibold text-lg mb-3 gradient-text">Servizi Aggiuntivi Disponibili</h4>
                        
                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="290" data-service="photo">
                            <div>
                                <div class="font-semibold mb-1">Servizio Fotografico Professionale</div>
                                <div class="text-sm text-slate-400">+€290 - Su una vettura a scelta</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="490" data-service="video-hd">
                            <div>
                                <div class="font-semibold mb-1">Video HD Professionale</div>
                                <div class="text-sm text-slate-400">+€490 - Disponibile su entrambe le vetture</div>
                            </div>
                        </label>

                        <label class="checkbox-container">
                            <input type="checkbox" class="extra-service" data-price="690" data-service="video-360">
                            <div>
                                <div class="font-semibold mb-1">Video 360° Immersivo</div>
                                <div class="text-sm text-slate-400">+€690 - Su una vettura (marchi diversi)</div>
                            </div>
                        </label>
                    </div>
                </div>

                <!-- Date and Time -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">Data e Orario</h3>
                    <div class="md-grid-cols-2">
                        <div class="date-picker-container">
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Data</label>
                            <div class="date-input-wrapper">
                                <input type="text" id="bookingDate" placeholder="Seleziona data" readonly required>
                                <svg class="calendar-icon w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
                                </svg>
                            </div>
                            <div id="customCalendar" class="custom-calendar hidden"></div>
                            <p class="text-xs text-slate-400 mt-2">Prenotazione da 48-72 ore prima, fino a 6 mesi</p>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Orario</label>
                            <select id="bookingTime" required>
                                <option value="">Seleziona orario</option>
                                <option value="09:00">09:00</option>
                                <option value="10:00">10:00</option>
                                <option value="11:00">11:00</option>
                                <option value="14:00">14:00</option>
                                <option value="15:00">15:00</option>
                                <option value="16:00">16:00</option>
                                <option value="17:00">17:00</option>
                            </select>
                        </div>
                    </div>
                </div>

                <!-- Personal Information -->
                <div class="glass-card p-8 animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6">I Tuoi Dati</h3>
                    <div class="md-grid-cols-2">
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Nome</label>
                            <input type="text" placeholder="Il tuo nome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Cognome</label>
                            <input type="text" placeholder="Il tuo cognome" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Email</label>
                            <input type="email" placeholder="tua@email.com" required>
                        </div>
                        <div>
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Telefono</label>
                            <input type="tel" placeholder="+39 123 456 7890" required>
                        </div>
                        <div class="md-col-span-2">
                            <label class="block text-sm font-semibold mb-2 text-slate-300">Note Aggiuntive (opzionale)</label>
                            <textarea rows="3" placeholder="Hai richieste particolari?"></textarea>
                        </div>
                    </div>
                </div>

                <!-- Terms -->
                <div class="glass-card p-6 animate-fade-in">
                    <label class="checkbox-container">
                        <input type="checkbox" id="termsCheckbox" required>
                        <div class="text-sm text-slate-300">
                            Accetto i <a href="#" class="text-[#c9a961] hover:underline">termini e condizioni</a> e la 
                            <a href="#" class="text-[#c9a961] hover:underline">politica sulla privacy</a>
                        </div>
                    </label>
                </div>
            </div>

            <!-- Sidebar - Price Summary -->
            <div class="lg-col-span-1">
                <div class="glass-card p-8 price-summary animate-fade-in">
                    <h3 class="text-2xl font-bold mb-6 gradient-text">Riepilogo</h3>
                    
                    <div class="space-y-4 mb-6 pb-6 border-b border-slate-700">
                        <div class="flex justify-between">
                            <span class="text-slate-300">Ferrari SF90 Stradale</span>
                            <span class="font-semibold" id="basePrice">€0</span>
                        </div>
                        <div class="flex justify-between hidden" id="secondCarPrice">
                            <span class="text-slate-300">Lamborghini Huracán</span>
                            <span class="font-semibold">€1.490</span>
                        </div>
                        <div id="extraServicesPrice" class="space-y-2"></div>
                    </div>

                    <div class="space-y-3 mb-6">
                        <div class="flex items-center gap-2 text-sm text-slate-300">
                            <svg class="w-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Assicurazione completa
                        </div>
                        <div class="flex items-center gap-2 text-sm text-slate-300">
                            <svg class="w-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Nessuna cauzione richiesta
                        </div>
                        <div class="flex items-center gap-2 text-sm text-slate-300">
                            <svg class="w-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Cambio data gratuito
                        </div>
                        <div class="flex items-center gap-2 text-sm text-slate-300">
                            <svg class="w-5 text-green-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
                            </svg>
                            Rimborso fino a 48h prima
                        </div>
                    </div>

                    <div style="background: linear-gradient(to right, rgba(201, 169, 97, 0.1), transparent); padding: 1rem; border-radius: 0.5rem; margin-bottom: 1.5rem;">
                        <div class="flex justify-between items-center">
                            <span class="text-lg font-semibold">Totale</span>
                            <span class="text-3xl font-bold gradient-text" id="totalPrice">€0</span>
                        </div>
                    </div>

                    <button class="btn-primary w-full" onclick="confirmBooking()">
                        Conferma Prenotazione
                    </button>

                    <p class="text-xs text-slate-400 text-center mt-4">
                        Prenotazione sicura e protetta
                    </p>
                </div>

                <!-- Policies -->
                <div class="glass-card p-6 mt-6 animate-fade-in policies-card">
                    <h4 class="font-semibold mb-4 gradient-text">Politiche</h4>
                    <div class="space-y-3 text-sm text-slate-300">
                        <div>
                            <strong>Rimborso:</strong> Rimborso completo fino a 48 ore prima della prenotazione.
                        </div>
                        <div>
                            <strong>Annullamento:</strong> Annullamento gratuito fino a 24 ore prima. Oltre tale termine, verrà trattenuto il 50% dell'importo.
                        </div>
                        <div>
                            <strong>Cambio Data:</strong> Modifica gratuita della data fino a 72 ore prima dell'esperienza.
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let bookingData = {
            distance: null,
            basePrice: 0,
            secondCar: false,
            extraServices: [],
            total: 0,
            selectedDate: null
        };

        // Date Picker Logic
        const today = new Date();
        const minDate = new Date(today);
        minDate.setDate(minDate.getDate() + 3);
        const maxDate = new Date(today);
        maxDate.setMonth(maxDate.getMonth() + 6);

        const dateInput = document.getElementById('bookingDate');
        const calendar = document.getElementById('customCalendar');
        let currentMonth = new Date();
        let selectedDate = null;

        dateInput.addEventListener('click', function() {
            calendar.classList.toggle('hidden');
            if (!calendar.classList.contains('hidden')) {
                renderCalendar();
            }
        });

        document.addEventListener('click', function(e) {
            if (!dateInput.contains(e.target) && !calendar.contains(e.target)) {
                calendar.classList.add('hidden');
            }
        });

        function renderCalendar() {
            const year = currentMonth.getFullYear();
            const month = currentMonth.getMonth();
            
            const firstDay = new Date(year, month, 1);
            const lastDay = new Date(year, month + 1, 0);
            const prevLastDay = new Date(year, month, 0);
            
            const firstDayIndex = firstDay.getDay();
            const lastDayDate = lastDay.getDate();
            const prevLastDayDate = prevLastDay.getDate();
            
            const monthNames = ['Gennaio', 'Febbraio', 'Marzo', 'Aprile', 'Maggio', 'Giugno',
                              'Luglio', 'Agosto', 'Settembre', 'Ottobre', 'Novembre', 'Dicembre'];
            const dayNames = ['Dom', 'Lun', 'Mar', 'Mer', 'Gio', 'Ven', 'Sab'];
            
            let html = `
                <div class="calendar-header">
                    <button type="button" class="calendar-nav-btn" onclick="prevMonth()">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                        </svg>
                    </button>
                    <div class="calendar-month-year">${monthNames[month]} ${year}</div>
                    <button type="button" class="calendar-nav-btn" onclick="nextMonth()">
                        <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </button>
                </div>
                <div class="calendar-grid">
            `;
            
            dayNames.forEach(day => {
                html += `<div class="calendar-day-header">${day}</div>`;
            });
            
            let adjustedFirstDay = firstDayIndex === 0 ? 6 : firstDayIndex - 1;
            
            for (let i = adjustedFirstDay; i > 0; i--) {
                html += `<div class="calendar-day empty"></div>`;
            }
            
            for (let day = 1; day <= lastDayDate; day++) {
                const date = new Date(year, month, day);
                const isDisabled = date < minDate || date > maxDate;
                const isToday = date.toDateString() === today.toDateString();
                const isSelected = selectedDate && date.toDateString() === selectedDate.toDateString();
                
                let classes = 'calendar-day';
                if (isDisabled) classes += ' disabled';
                if (isToday) classes += ' today';
                if (isSelected) classes += ' selected';
                
                html += `<div class="${classes}" onclick="selectDate(${year}, ${month}, ${day})" ${isDisabled ? '' : `data-date="${year}-${month}-${day}"`}>${day}</div>`;
            }
            
            html += '</div>';
            calendar.innerHTML = html;
        }

        function selectDate(year, month, day) {
            const date = new Date(year, month, day);
            if (date < minDate || date > maxDate) return;
            
            selectedDate = date;
            bookingData.selectedDate = date;
            
            const formattedDate = `${day.toString().padStart(2, '0')}/${(month + 1).toString().padStart(2, '0')}/${year}`;
            dateInput.value = formattedDate;
            
            calendar.classList.add('hidden');
        }

        function prevMonth() {
            currentMonth.setMonth(currentMonth.getMonth() - 1);
            renderCalendar();
        }

        function nextMonth() {
            currentMonth.setMonth(currentMonth.getMonth() + 1);
            renderCalendar();
        }

        // Distance selection
        document.querySelectorAll('.distance-option').forEach(option => {
            option.addEventListener('click', function() {
                document.querySelectorAll('.distance-option').forEach(opt => opt.classList.remove('selected'));
                this.classList.add('selected');
                
                bookingData.distance = this.dataset.km;
                bookingData.basePrice = parseInt(this.dataset.price);
                updatePriceSummary();
            });
        });

        // Second car checkbox
        document.getElementById('secondCarCheckbox').addEventListener('change', function() {
            bookingData.secondCar = this.checked;
            document.getElementById('extraServices').classList.toggle('hidden', !this.checked);
            document.getElementById('secondCarPrice').classList.toggle('hidden', !this.checked);
            
            if (!this.checked) {
                document.querySelectorAll('.extra-service').forEach(cb => cb.checked = false);
                bookingData.extraServices = [];
            }
            
            updatePriceSummary();
        });

        // Extra services
        document.querySelectorAll('.extra-service').forEach(checkbox => {
            checkbox.addEventListener('change', function() {
                const price = parseInt(this.dataset.price);
                const service = this.dataset.service;
                
                if (this.checked) {
                    bookingData.extraServices.push({ service, price });
                } else {
                    bookingData.extraServices = bookingData.extraServices.filter(s => s.service !== service);
                }
                
                updatePriceSummary();
            });
        });

        function updatePriceSummary() {
            let total = bookingData.basePrice;
            
            document.getElementById('basePrice').textContent = `€${bookingData.basePrice.toLocaleString()}`;
            
            if (bookingData.secondCar) {
                total += 1490;
            }
            
            const extraServicesDiv = document.getElementById('extraServicesPrice');
            extraServicesDiv.innerHTML = '';
            
            bookingData.extraServices.forEach(service => {
                total += service.price;
                const serviceNames = {
                    'photo': 'Servizio Fotografico',
                    'video-hd': 'Video HD',
                    'video-360': 'Video 360°'
                };
                
                const div = document.createElement('div');
                div.className = 'flex justify-between';
                div.innerHTML = `
                    <span class="text-slate-300 text-sm">${serviceNames[service.service]}</span>
                    <span class="font-semibold text-sm">€${service.price}</span>
                `;
                extraServicesDiv.appendChild(div);
            });
            
            bookingData.total = total;
            document.getElementById('totalPrice').textContent = `€${total.toLocaleString()}`;
        }

        function confirmBooking() {
            if (!bookingData.distance) {
                alert('Seleziona un percorso prima di procedere');
                return;
            }
            
            const date = dateInput.value;
            const time = document.getElementById('bookingTime').value;
            const terms = document.getElementById('termsCheckbox').checked;
            
            if (!date || !time) {
                alert('Seleziona data e orario');
                return;
            }
            
            if (!terms) {
                alert('Accetta i termini e condizioni per procedere');
                return;
            }
            
            alert(`Prenotazione confermata!\n\nRiepilogo:\n- Percorso: ${bookingData.distance} km\n- Data: ${date} alle ${time}\n- Totale: €${bookingData.total.toLocaleString()}\n\nRiceverai una conferma via email.`);
        }

        // Animation on scroll
        const observerOptions = {
            threshold: 0.1,
            rootMargin: '0px 0px -50px 0px'
        };

        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.style.opacity = '1';
                    entry.target.style.transform = 'translateY(0)';
                }
            });
        }, observerOptions);

        document.querySelectorAll('.animate-fade-in').forEach(el => {
            el.style.opacity = '0';
            el.style.transform = 'translateY(30px)';
            el.style.transition = 'all 0.6s ease';
            observer.observe(el);
        });
    </script>
</body>
</html>
